(this["webpackJsonpvrai-debat-app"]=this["webpackJsonpvrai-debat-app"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"root":[{"id":"root","name":"Le Vrai D\xe9bat","votesCount":679938,"votesCountOk":523266,"keywords":[]}],"nodes":[{"id":0,"name":"D\xe9mocratie, institutions, RIC","votesCount":132063,"votesCountOk":104900,"keywords":[{"id":0,"name":"faim"},{"id":1,"name":"mourir"},{"id":2,"name":"sdf"},{"id":3,"name":"Google"},{"id":4,"name":"pr\xe9caire"},{"id":5,"name":"entreprise"},{"id":6,"name":"r\xe9ferendum"},{"id":7,"name":"racket"}]},{"id":1,"name":"Economie, finances, travail, comptes-publics","votesCount":154551,"votesCountOk":129428,"keywords":[{"id":0,"name":"discipline"},{"id":1,"name":"public"},{"id":2,"name":"d\xe9veloppement"},{"id":3,"name":"pr\xe9caire"},{"id":4,"name":"choix"},{"id":5,"name":"d\xe9couvert"},{"id":6,"name":"patrimoine"},{"id":7,"name":"pr\xe9f\xe9rence"}]},{"id":2,"name":"Education, jeunesse, enseignement-sup\xe9rieur, recherche, innovation","votesCount":58864,"votesCountOk":42265,"keywords":[{"id":0,"name":"constitutionnel"},{"id":1,"name":"etat"},{"id":2,"name":"enfant"},{"id":3,"name":"effectif"},{"id":4,"name":"justice"},{"id":5,"name":"pratique"},{"id":6,"name":"vocation"},{"id":7,"name":"priv\xe9"}]},{"id":3,"name":"Europe, affaires-\xe9trang\xe8res, outre-mer","votesCount":48031,"votesCountOk":33354,"keywords":[{"id":0,"name":"avantage"},{"id":1,"name":"\xe9conomie"},{"id":2,"name":"construction"},{"id":3,"name":"entreprise"},{"id":4,"name":"budget"},{"id":5,"name":"citoyennet\xe9"},{"id":6,"name":"budget"},{"id":7,"name":"r\xe9voquer"}]},{"id":4,"name":"Justice, police, arm\xe9e","votesCount":28707,"votesCountOk":21075,"keywords":[{"id":0,"name":"r\xe9sultat"},{"id":1,"name":"corps"},{"id":2,"name":"nombre"},{"id":3,"name":"pr\xe9sident"},{"id":4,"name":"ch\xf4meurs"},{"id":5,"name":"criminel"},{"id":6,"name":"d\xe9ontologie"},{"id":7,"name":"interm\xe9diaires"}]},{"id":5,"name":"Sant\xe9, solidarit\xe9, handicap","votesCount":40866,"votesCountOk":31166,"keywords":[{"id":0,"name":"avis"},{"id":1,"name":"pluralit\xe9"},{"id":2,"name":"r\xe9el"},{"id":3,"name":"\xe9conomie"},{"id":4,"name":"cr\xe9ation"},{"id":5,"name":"domaine"},{"id":6,"name":"observatoire"},{"id":7,"name":"prestation"}]},{"id":6,"name":"Sport, culture","votesCount":27291,"votesCountOk":18367,"keywords":[{"id":0,"name":"professionnel"},{"id":1,"name":"salaires"},{"id":2,"name":"contr\xf4le"},{"id":3,"name":"chasse"},{"id":4,"name":"populisme"},{"id":5,"name":"t\xe9l\xe9vision"},{"id":6,"name":"mandats"},{"id":7,"name":"charte"}]},{"id":7,"name":"Expression Libre","votesCount":165090,"votesCountOk":123143,"keywords":[{"id":0,"name":"r\xe9alit\xe9"},{"id":1,"name":"si\xe8ge"},{"id":2,"name":"tour"},{"id":3,"name":"adulte"},{"id":4,"name":"r\xe9forme"},{"id":5,"name":"2017"},{"id":6,"name":"fondamental"},{"id":7,"name":"libert\xe9"}]},{"id":8,"name":"Transition \xe9cologique et solidaire, agriculture, alimentation","votesCount":24475,"votesCountOk":19568,"keywords":[{"id":0,"name":"professionnel"},{"id":1,"name":"soci\xe9t\xe9"},{"id":2,"name":"consultation"},{"id":3,"name":"journal"},{"id":4,"name":"r\xe9alit\xe9"},{"id":5,"name":"\xe9l\xe9ment"},{"id":6,"name":"argent"},{"id":7,"name":"universel"}]}]}')},18:function(e,t,n){e.exports=n(42)},23:function(e,t,n){},24:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(15),o=n.n(r),s=(n(23),n(3)),c=(n(24),n(16)),l=n(14),d=function(e){var t=i.a.useRef(""),n=i.a.useRef("");i.a.useEffect((function(){var a=l.select(t.current),i=l.select(n.current);e.zoomtool&&a.call(l.zoom().extent([[0,0],[e.width,e.height]]).scaleExtent([1,2]).on("zoom",(function(){i.attr("transform",l.event.transform)})))}));var a="0 0 "+e.width+" "+e.height;return i.a.createElement("div",null,i.a.createElement("svg",{id:e.chartId,viewBox:a,ref:t},i.a.createElement("g",{ref:n},e.children)))},u=n(2),m=function(e){return i.a.createElement("foreignObject",{width:200,height:200},i.a.createElement("div",{className:"tooltip"},i.a.createElement("div",{className:"title"},e.title),i.a.createElement("div",{className:"body"},e.body)))},f=n(14),v=function(e){var t=e.data,n=e.width/2,a=e.height/2,r=2*Math.PI/t.nodes.length,o=2*Math.PI/8,s=i.a.useRef(""),c=i.a.useRef(""),l=i.a.useState(""),d=Object(u.a)(l,2),v=d[0],p=d[1],h=i.a.useState(""),b=Object(u.a)(h,2),g=b[0],E=b[1];function k(e){return"root"===e.id?120:e.votesCount?.26*Math.sqrt(e.votesCount):60}function y(e){return"root"===e.id?100:e.votesCount?.22*Math.sqrt(e.votesCount):50}function C(e){return"root"===e.id?36:e.votesCount?.35*Math.sqrt(e.votesCount/Math.max(30,e.name.length)):14}function w(t){return"root"===t.id?"#fafafe":e.colors[t.id%e.colors.length]}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("root"===e.id)return n;var a=250+(!0===t?60:0);return n+a*Math.cos(r*e.id)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("root"===e.id)return a;var n=250+(!0===t?60:0);return a+n*Math.sin(r*e.id)}return i.a.useEffect((function(){f.select(c.current).attr("opacity",0);var i=f.select(s.current).selectAll(".ring1").data(t.nodes).enter().append("g");i.append("line").classed("link",!0).attr("x1",n).attr("y1",a).attr("x2",O).attr("y2",x),i.append("g").classed("ring1",!0).attr("transform",(function(e){return"translate("+O(e)+","+x(e)+")"})).append("g").classed("node",!0),i.selectAll(".root").data(t.root).enter().append("g").classed("node",!0).classed("root",!0).attr("transform","translate("+n+","+a+")");var r=i.selectAll(".node");r.append("ellipse").classed("node-shape",!0).attr("rx",k).attr("ry",y).style("fill",w),r.append("foreignObject").attr("width",(function(e){return 2*k(e)})).attr("height",(function(e){return 2*y(e)})).attr("x",(function(e){return-k(e)})).attr("y",(function(e){return-y(e)})).append("xhtml:div").classed("label",!0).style("line-height",(function(e){return 2*y(e)+"px"})).style("font-size",(function(e){return C(e)+"px"})).html((function(e){return"<span>"+e.name+"</span>"})),r.on("click",(function(t){var i=w(t),c=Math.min(Math.max(.8*C(t),9),12),l=k(t),d=y(t);r.selectAll("ellipse").classed("selected",(function(e){return e.id===t.id})),r.selectAll(".ring2 ellipse").classed("selected",!1),f.select(s.current).transition().attr("transform",(function(e){return"translate("+(n-O(t,!0))+","+(a-x(t,!0))+")"})).duration(2e3);var u=f.selectAll(".ring1");u.transition().attr("transform",(function(e){return"translate("+O(e,e.id===t.id)+","+x(e,e.id===t.id)+")"})).duration(2e3),u.filter((function(e){return e.id!==t.id})).selectAll(".ring2").remove(),r.filter((function(e){return e.id===t.id})).selectAll("g").raise();var m=u.filter((function(e){return e.id===t.id})).selectAll(".ring2").data((function(e){return e.keywords})).enter().append("g").classed("ring2",!0).attr("transform",(function(e){return"translate("+function(e,t){return(t+40)*Math.cos(o*e.id)}(e,l)+","+function(e,t){return(t+20)*Math.sin(o*e.id)}(e,d)+")"}));m.append("ellipse").classed("node-shape",!0).attr("rx",40).attr("ry",20).style("fill",i).style("opacity",0).transition().style("opacity",1).duration(2e3),m.append("foreignObject").attr("width",80).attr("height",40).attr("x",-40).attr("y",-20).append("xhtml:div").classed("label",!0).style("line-height","40px").style("font-size",c+"px").html((function(e){return"<span>"+e.name+"</span>"})),m.on("click",(function(n){m.selectAll("ellipse").classed("selected",(function(e){return e.id===n.id})),e.onClick(t.id,t.name,n.id,n.name)})),e.onClick(t.id,t.name,null)})).on("mouseover",(function(e){p(e.name),E(e.votesCount+" votes dont "+e.votesCountOk+" favorables"),f.select(c.current).attr("transform","translate("+(f.event.clientX+10)+","+(f.event.clientY+10)+")").transition().attr("opacity",1).duration(200)})).on("mouseout",(function(e){f.select(c.current).transition().attr("opacity",0).duration(200)}))})),i.a.createElement("g",{className:"network-graph"},i.a.createElement("g",{ref:s}),i.a.createElement("g",{ref:c},i.a.createElement(m,{title:v,body:g})))},p=function(e){for(var t=8*e.radius+25,n=2*e.radius+10,a=[],r=0;r<4;r++){var o=e.radius/Math.sqrt(4-r);a[r]={radius:o,centerX:5*(1+r)+(1+2*r)*e.radius,centerY:n/2,id:e.id+"_"+r,filled:e.quantiles[r]<e.score}}var s=a.map((function(t){return i.a.createElement("circle",{r:t.radius,cx:t.centerX,cy:t.centerY,key:t.id,stroke:e.color,fill:t.filled?e.color:"transparent"})}));return i.a.createElement("svg",{width:t,height:n},i.a.createElement("g",null,s))},h=function(e){var t=i.a.useRef(),n=i.a.useState(""),a=Object(u.a)(n,2),r=a[0],o=a[1],s=i.a.useState("+"),c=Object(u.a)(s,2),l=c[0],d=c[1],m=i.a.useState(!1),f=Object(u.a)(m,2),v=f[0],h=f[1];i.a.useEffect((function(){setTimeout((function(){var e=t.current;e.scrollHeight-e.clientHeight<15?o("expanded"):h(!0)}),10)}),[t]);var b={color:e.color,borderColor:e.color};return i.a.createElement("li",{key:e.id,className:"contribution-list-item"},i.a.createElement("h1",{className:"contribution-title"},e.contrib.contribution_versions_title),i.a.createElement("div",{className:"contribution-body"},i.a.createElement("div",{className:"text "+r,ref:t},e.contrib.contribution_versions_bodyText),""===r&&i.a.createElement("div",{className:"mask"})),i.a.createElement("div",{className:"bottom"},i.a.createElement("div",{className:"buttons"},v&&i.a.createElement("button",{onClick:function(){r?(o(""),d("+")):(o("expanded"),d("-"))}},l)),i.a.createElement("div",{className:"scale"},i.a.createElement(p,{radius:8,color:e.color,score:e.contrib.contributions_votesCountOk,quantiles:e.quantiles})),i.a.createElement("div",{className:"vote-count",style:b},e.contrib.contributions_votesCount," votes dont ",e.contrib.contributions_votesCountOk," favorables")))},b=function(e){var t=i.a.useRef(null);var n=null;void 0!==e.contributions&&(n=e.contributions.map((function(t,n){return i.a.createElement(h,{key:e.id+"_"+n,id:e.id+"_"+n,contrib:t,color:(a=t.topic_id,e.colorPalette[a%e.colorPalette.length]),quantiles:e.quantiles});var a})));var a="";return e.title&&(a+=e.title.topic,e.title.keyword&&(a+=" > "+e.title.keyword)),i.a.useEffect((function(){t.current.scrollTo(0,0)}),[n]),i.a.createElement("div",{ref:t,className:"contribution-list"},e.title&&i.a.createElement("h1",{className:"contribution-list-title"},a),i.a.createElement("ul",{className:"contribution-list-list"},n))},g=n(17),E=n(4),k=n.n(E);Object(g.a)({basename:"/le-vrai-debat/app"});var y=function(){var e=i.a.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=i.a.useState({topic:null,keyword:null}),o=Object(s.a)(r,2),l=o[0],u=o[1],m=i.a.useState([]),f=Object(s.a)(m,2),p=f[0],h=f[1],g=i.a.useState("root_unknown"),E=Object(s.a)(g,2),y=E[0],C=E[1];function w(e,t,n,a){console.log("Topic clicked: topic='"+t+"', keyword="+a),u({topic:t,keyword:a}),function(e,t){if(void 0===t||null===t){var n="./data/topic_"+e+"_main_contributions.json";k.a.get(n).then((function(e){h(e.data)})).catch((function(e){console.log(e)}))}else{var a="./data/topic_"+e+"_keyword_"+t+"_main_contributions.json";k.a.get(a).then((function(e){h(e.data)})).catch((function(e){console.log(e)}))}}(e,n),C(e+"_"+(null!==n?n:"unknown"))}return i.a.useEffect((function(){n||(w("root","Le Vrai D\xe9bat",null),a(!0))}),[n]),i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"app-wrap"},i.a.createElement("div",{className:"chart-wrap"},i.a.createElement(d,{chartId:"first",width:700,height:700,zoomtool:!1},i.a.createElement(v,{width:700,height:700,data:c,onClick:w,colors:["#E6B0AA","#D7BDE2","#A9CCE3","#A3E4D7","#FAD7A0","#F5B7B1","#D2B4DE","#A9DFBF","#F9E79F"]}))),i.a.createElement("div",{className:"contributions-wrap"},i.a.createElement(b,{title:l,contributions:p,id:y,colorPalette:["#CD6155","#9B59B6","#2980B9","#1ABC9C","#F39C12","#E74C3C","#8E44AD","#27AE60","#F1C40F"],quantiles:[500,1e3,2500,4e3]}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.0e7d0e28.chunk.js.map